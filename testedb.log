/*C12*/SET SCHEMA PUBLIC
alter table course drop constraint FKkcqry8au976fmoov49prx1212
alter table exercise drop constraint FKoohf1t296xtx5kt0waihyna1k
alter table lesson drop constraint FKjs3c7skmg8bvdddok5lc7s807
alter table member_role drop constraint FKdiix07v86r3ntrbs3l02qr7y0
alter table member_role drop constraint FK34g7epqlcxqloewku3aoqhhmg
drop table course if exists
drop table exercise if exists
drop table lesson if exists
drop table member if exists
drop table member_role if exists
drop table role if exists
create table course (id bigint generated by default as identity (start with 1), date_of_creation timestamp, description varchar(255) not null, image varchar(20971520), subject varchar(255) not null, member_id bigint, primary key (id))
create table exercise (id bigint generated by default as identity (start with 1), language varchar(255), subject varchar(255) not null, title varchar(255) not null, lesson_id bigint, primary key (id))
create table lesson (id bigint generated by default as identity (start with 1), content varchar(255) not null, date_of_creation timestamp, title varchar(255) not null, course_id bigint, primary key (id))
create table member (id bigint generated by default as identity (start with 1), date_of_registration timestamp, date_of_birth timestamp, email varchar(255) not null, first_name varchar(255) not null, name varchar(255) not null, password varchar(255), pseudo varchar(255) not null, primary key (id))
create table member_role (member_id bigint not null, role_id bigint not null, primary key (member_id, role_id))
create table role (id bigint generated by default as identity (start with 1), name varchar(255), primary key (id))
alter table member add constraint UK_mbmcqelty0fbrvxp1q58dn57t unique (email)
alter table member add constraint UK_bot25sxfkrv0hmmo5g111pfwo unique (pseudo)
alter table course add constraint FKkcqry8au976fmoov49prx1212 foreign key (member_id) references member
alter table exercise add constraint FKoohf1t296xtx5kt0waihyna1k foreign key (lesson_id) references lesson
alter table lesson add constraint FKjs3c7skmg8bvdddok5lc7s807 foreign key (course_id) references course
alter table member_role add constraint FKdiix07v86r3ntrbs3l02qr7y0 foreign key (role_id) references role
alter table member_role add constraint FK34g7epqlcxqloewku3aoqhhmg foreign key (member_id) references member
